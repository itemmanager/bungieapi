# generated by update to not change manually
import typing as t

from bungieapi.base import BaseClient
from bungieapi.forge import forge
from bungieapi.generated.components.responses import (
    CEListOfPartnerOfferSkuHistoryClientResponse,
    booleanClientResponse,
)
from bungieapi.generated.components.schemas.tokens import PartnerOfferClaimRequest


class Client(BaseClient):
    async def claim_partner_offer(
        self,
        request: t.Optional["PartnerOfferClaimRequest"],
    ) -> booleanClientResponse:
        """Claim a partner offer as the authenticated user."""
        query = None
        result = await self.post(
            path="/Tokens/Partner/ClaimOffer/", query=query, request=request
        )
        return forge(booleanClientResponse, result)

    async def apply_missing_partner_offers_without_claim(
        self,
        partner_application_id: t.Optional[int] = None,
        target_bnet_membership_id: t.Optional[int] = None,
    ) -> booleanClientResponse:
        """Apply a partner offer to the targeted user.

        This endpoint does not claim a new offer, but any already claimed offers will be applied to the game if not already.
        Parameters:
            partner_application_id: The partner application identifier.
            target_bnet_membership_id: The bungie.net user to apply missing offers to. If not self, elevated permissions are required.
        """
        query = None
        result = await self.post(
            path=f"/Tokens/Partner/ApplyMissingOffers/{partner_application_id}/{target_bnet_membership_id}/",
            query=query,
        )
        return forge(booleanClientResponse, result)

    async def get_partner_offer_sku_history(
        self,
        partner_application_id: t.Optional[int] = None,
        target_bnet_membership_id: t.Optional[int] = None,
    ) -> CEListOfPartnerOfferSkuHistoryClientResponse:
        """Returns the partner sku and offer history of the targeted user.

        Elevated permissions are required to see users that are not yourself.
        Parameters:
            partner_application_id: The partner application identifier.
            target_bnet_membership_id: The bungie.net user to apply missing offers to. If not self, elevated permissions are required.
        """
        query = None
        result = await self.get(
            path=f"/Tokens/Partner/History/{partner_application_id}/{target_bnet_membership_id}/",
            query=query,
        )
        return forge(CEListOfPartnerOfferSkuHistoryClientResponse, result)
